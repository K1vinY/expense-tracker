# 🏗️ 模組化重構說明

## 📁 新的檔案結構

```
expense-tracker/
├── index-modular.html      # 模組化版本的主頁面
├── index.html              # 原始單檔案版本（保留）
├── styles.css              # 樣式檔案
├── firebase-config.js      # Firebase 配置
├── js/                     # JavaScript 模組目錄
│   ├── app.js             # 主應用程式邏輯
│   ├── auth.js            # 身份驗證管理
│   ├── groups.js          # 群組管理
│   ├── expenses.js        # 費用管理
│   ├── members.js         # 成員管理
│   └── balances.js        # 餘額計算
└── MODULAR_README.md       # 本說明檔案
```

## 🔧 模組化架構

### **主應用程式 (`app.js`)**
- 負責初始化和協調各個模組
- 管理全域狀態和配置
- 處理頁面導航和事件綁定

### **身份驗證模組 (`auth.js`)**
- 用戶登入/登出
- 用戶註冊
- 用戶設定管理
- 密碼重設
- 邀請處理

### **群組管理模組 (`groups.js`)**
- 群組的 CRUD 操作
- 群組列表顯示
- 群組詳情頁面
- 群組設定

### **費用管理模組 (`expenses.js`)**
- 費用的新增/刪除
- 費用表單處理
- 費用列表顯示
- 分錢邏輯

### **成員管理模組 (`members.js`)**
- 成員的添加/移除
- 成員列表顯示
- 邀請系統
- 成員數據獲取

### **餘額計算模組 (`balances.js`)**
- 餘額計算邏輯
- 結算建議
- 餘額頁面顯示

## 🚀 使用方式

### **測試模組化版本：**
1. 打開 `index-modular.html`
2. 確保所有 JavaScript 檔案都在 `js/` 目錄中
3. 功能應該與原始版本完全相同

### **開發新功能：**
1. 在對應的模組檔案中添加功能
2. 在 `app.js` 中綁定事件
3. 確保模組間通過主應用程式通信

## ✅ 優點

1. **更好的組織**：每個功能分離到獨立檔案
2. **易於維護**：修改特定功能時只需要編輯對應檔案
3. **團隊協作**：不同開發者可以同時工作在不同模組
4. **代碼重用**：模組可以在其他專案中重用
5. **除錯容易**：問題更容易定位到特定檔案
6. **測試友好**：可以單獨測試每個模組

## 🔄 遷移步驟

1. **備份原始檔案**：保留 `index.html` 作為備份
2. **測試模組化版本**：確保所有功能正常
3. **逐步遷移**：可以一個模組一個模組地遷移
4. **更新部署**：使用 `index-modular.html` 替換 `index.html`

## 🛠️ 開發建議

### **添加新功能：**
1. 確定功能屬於哪個模組
2. 在對應模組中添加方法
3. 在 `app.js` 中綁定事件
4. 測試功能完整性

### **修改現有功能：**
1. 找到對應的模組檔案
2. 修改相關方法
3. 確保不影響其他模組
4. 測試修改後的功能

### **除錯問題：**
1. 檢查控制台錯誤
2. 確定問題所在的模組
3. 檢查模組間的通信
4. 使用瀏覽器開發者工具

## 📝 注意事項

- 所有模組都通過主應用程式 (`app`) 實例通信
- 避免模組間直接調用，應該通過主應用程式
- 保持模組的獨立性和可重用性
- 定期測試所有功能確保沒有回歸問題

## 🎯 未來改進

1. **TypeScript 支援**：添加類型檢查
2. **單元測試**：為每個模組添加測試
3. **構建工具**：使用 Webpack 或 Vite 進行打包
4. **狀態管理**：使用更專業的狀態管理方案
5. **API 層**：將 Firebase 操作抽象到獨立的 API 層
